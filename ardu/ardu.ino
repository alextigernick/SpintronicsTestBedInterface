#include <AccelStepper.h>

#define stepPin1 5
#define dirPin1  4
#define stepPin2 3
#define dirPin2  2

#define relay_pin 8
#define tempSensorA A0
#define tempSensorB A1
const static float temps1[] PROGMEM = {-272.15,416.99630629463684,342.5542517844518,305.9863391095304,282.5504578186643,265.6245919375292,252.53069928295133,241.93717897835472,233.091925295997,225.53139424385597,218.95107051053964,213.14091084255801,207.95034184055976,203.26799534199637,199.00934211860744,195.1088120701632,191.51458826063384,188.1850601326036,185.08634234027954,182.19049863597343,179.47424450761991,176.9179824140257,174.5050728152999,172.22127542724326,170.0543153817664,167.9935424005813,166.02966016623964,164.15450932261444,162.36089190864732,160.64242813421856,158.9934386429037,157.40884703698765,155.8840986433239,154.41509239618387,152.9981233896201,151.6298341663944,150.3071732054151,149.02735937521533,147.7878513593335,146.5863212466919,145.4206316281883,144.2888156586469,143.18905963776342,142.11968773981243,141.0791485835869,140.0660033842919,139.07891547026117,138.11664098120707,137.17802059268132,136.2619721346316,135.36748399128118,134.4936091857391,133.63946006634131,132.80420352317446,131.98705667292626,131.18728295842743,130.4041886162513,129.6371194717176,128.88545802576556,128.1486208025657,127.42605593052406,126.71724093261076,126.02168070477711,125.33890566368513,124.66847004711838,124.00995035230477,123.36294389901997,122.7270675057664,122.10195626857973,121.48726243311933,120.88265435167142,120.2878155175543,119.70244367017489,119.12624996466025,118.55895820058555,118.00030410485357,117.45003466425288,116.90790750364715,116.37369030612439,115.84716027177404,115.32810361206396,114.81631507705964,114.31159751297463,113.8137614477605,113.3226247026438,112.83801202769587,112.35975475968371,111.88769050059784,111.42166281538289,110.96152094752102,110.50711955122267,110.0583184390839,109.61498234415564,109.17698069545406,108.74418740601783,108.31648067268361,107.89374278681635,107.47585995528675,107.06272213104211,106.65422285266209,106.25025909233966,105.85073111176206,105.45554232540991,105.0645991708214,104.677810985404,104.29508988940262,103.91635067466211,103.5415106988429,103.17048978477686,102.80321012466618,102.43959618885083,102.0795746388875,101.72307424469784,101.37002580556299,101.02036207475123,100.67401768758276,100.33092909274598,99.99103448669052,99.65427375093623,99.32058839214216,98.98992148479459,98.66221761637661,98.33742283489318,98.01548459863221,97.69635172804806,97.37997435966224,97.0663039018811,96.75529299263548,96.44689545875445,96.14106627698902,95.83776153660523,95.53693840347347,95.23855508558279,94.94257079991235,94.6489457405977,94.35764104833237,94.06861878094628,93.78184188510949,93.49727416910895,93.2148802766506,92.93462566164078,92.65647656390405,92.3803999857958,92.10636366967111,91.8343360761719,91.56428636329827,91.29618436622928,91.03000057786284,90.76570613004259,90.50327277544443,90.24267287009525,89.98387935649612,89.72686574732711,89.47160610970928,89.21807505000066,88.96624769910528,88.71609969827523,88.46760718538513,88.22074678166103,87.97549557884577,87.73183112678362,87.48973142140835,87.24917489311855,87.01014039552655,86.77260719456467,86.53655495793822,86.30196374490896,86.06881399639985,85.83708652540628,85.60676250770484,85.37782347284713,85.15025129542909,84.92402818662543,84.69913668597962,84.47555965344105,84.25328026163879,84.03228198838593,83.81254860940425,83.59406419126299,83.37681308452295,83.1607799170809,82.94594958770415,82.73230725975242,82.51983835507792,82.30852854809876,82.0983637600396,81.88933015333436,81.68141412618479,81.47460230727006,81.26888155060328,81.06423893052857,80.86066173685515,80.6581374701235,80.45665383700037,80.25619874579667,80.05676030210572,79.85832680455809,79.66088674068834,79.46442878291077,79.26894178460094,79.07441477627953,78.88083696189472,78.68819771520111,78.49648657623175,78.30569324785972,78.11580759244839,77.92681962858512,77.73871952789835,77.55149761195423,77.36514434923032,77.17965035216503,76.99500637427963,76.81120330737104,76.62823217877371,76.44608414868753,76.2647505075717,76.0842226736001,75.90449219017904,75.7255507235235,75.54739006029166,75.37000210527515,75.19337887914389,75.01751251624393,74.84239526244647,74.66801947304765,74.49437761071613,74.32146224348833,74.1492660428101,73.97778178162241,73.80700233249144,73.63692066577988,73.46752984786104,73.29882303937143,73.13079349350375,72.9634345543368,72.7967396552034,72.6307023170935,72.46531614709284,72.30057483685584,72.13647216111121,71.97300197620098,71.81015821864963,71.64793490376564,71.48632612427195,71.32532604896574,71.16492892140707,71.00512905863496,70.84592084991078,70.68729875548757,70.52925730540579,70.37179109831317,70.2148948003101,70.05856314381799,69.90279092647148,69.74757301003285,69.59290431932908,69.43877984121008,69.28519462352824,69.13214377413857,68.97962245991869,68.8276259058087,68.67614939386993,68.52518826236269,68.3747379048416,68.22479376926981,68.07535135714943,67.92640622266958,67.77795397187128,67.62999026182774,67.48251079984095,67.33551134265406,67.18898769567812,67.04293571223417,66.89735129280928,66.75223038432728,66.60756897943276,66.46336311578875,66.31960887538736,66.17630238387363,66.03343980988177,65.89101736438374,65.74903130004952,65.60747791061999,65.46635353029029,65.32565453310525,65.18537733236525,65.0455183800434,64.90607416621276,64.767041218484,64.62841610145335,64.49019541616036,64.35237579955492,64.21495392397452,64.07792649662974,63.94129025909979,63.80504198683627,63.66917848867581,63.53369660636133,63.3985932140713,63.263865217957516,63.129509555690504,62.99552319601315,62.861903138301386,62.72864641213317,62.595750076863794,62.46321122120952,62.33102696283726,62.199194447961816,62.067710850949425,61.93657337392841,61.80577924640579,61.6753257248908,61.545210092524144,61.415429658713606,61.28598175877568,61.156863753583025,61.028073029217694,60.89960699662987,60.77146309130217,60.6436387729197,60.51613152504507,60.38893885479848,60.262058292543486,60.13548739157716,60.00922372782583,59.88326489954483,59.757608527023876,59.6322522522961,59.50719373885272,59.382430671361305,59.25796075538864,59.13378171712844,59.009891303132235,58.88628728004551,58.76296743434716,58.63992957209297,58.51717151866359,58.394691118515766,58.272486234937276,58.150554749806304,58.02889456335362,57.90750359392871,57.786379777769355,57.66552106877481,57.54492543828195,57.42459087484502,57.30451538401877,57.18469698814437,57.0651337261387,56.945823653286936,56.8267648410378,56.707955376801635,56.58939336375215,56.47107692063025,56.35300418155094,56.235173295813354,56.11758242771282,56.00022975635608,55.88311347547915,55.76623179326748,55.649582932178646,55.533165128767905,55.4169766335159,55.30101571065859,55.18528063802006,55.06976970684707,54.95448122164652,54.83941350002431,54.724564872527424,54.609933682487224,54.495518285865444,54.3813170511022,54.26732835896587,54.15355060240512,54.039982186402824,53.92662152783231,53.81346705531473,53.70051720907924,53.587770440824386,53.47522521358172,53.36288000158078,53.25073329011616,53.138783575416426,53.02702936451442,52.915469175119256,52.80410153549008,52.692924984311844,52.581938070571766,52.47113935343816,52.36052740214063,52.25010079585144,52.13985812356856,52.02979798400071,51.91991898545285,51.810219745713994,51.70069889194593,51.59135506057339,51.48218689717561,51.373193056379534,51.26437220175353,51.155723005703464,51.04724414936902,50.9389343225219,50.83079222346532,50.72281655893397,50.61500604399623,50.50735940195659,50.399875364259856,50.29255267039599,50.18539006780679,50.07838631179288,49.971540165422084,49.864850399439376,49.758315792176575,49.65193512946479,49.545707204546375,49.4396308179887,49.33370477759877,49.22792789833858,49.12229900224173,49.01681691833062,48.91148048253507,48.80628853761118,48.70123993306197,48.59633352505773,48.4915681763585,48.38694275623624,48.28245614039895,48.17810721091462,48.073894856136576,47.969817970629435,47.865875455096045,47.76206621630473,47.65838916701796,47.554843225921275,47.45142731755294,47.34814037223458,47.24498132600263,47.14194912054012,47.039042703109146,46.936261026484544,46.83360304888777,46.73106773392129,46.62865405050445,46.5263609728089,46.424187480195485,46.32213255715135,46.22019519322788,46.11837438297886,46.016669125899796,45.91507842636719,45.8136012935791,45.71223674149559,45.61098378877995,45.509841458740766,45.40880877927418,45.30788478280692,45.20706850623941,45.10635899088999,45.00575528243917,44.90525643087483,44.80486149043725,44.70456951956538,44.60437958084293,44.504290740945464,44.40430207058739,44.30441264447006,44.20462154122953,44.10492784338567,44.00533063729068,43.905829013079085,43.806422064617095,43.70710888945331,43.6078885887693,43.50876026733039,43.40972303343756,43.31077599887891,43.21191827888231,43.11314899206735,43.014467260398874,42.91587220913999,42.81736296680583,42.718938665117264,42.62059843895565,42.52234142631704,42.42416676826747,42.32607360889807,42.22806109528091,42.13012837742434,42.03227460822984,41.934498943448204,41.83680054163631,41.7391785641143,41.64163217492279,41.544160540780695,41.446762831042804,41.3494382176583,41.25218587512887,41.15500498046754,41.05789471315734,40.96085425511086,40.86388279062925,40.76697950636196,40.67014359126648,40.57337423656884,40.47667063572305,40.38003198437252,40.283457480310005,40.18694632343903,40.0904977157345,39.99411086120449,39.897784965851145,39.8015192376331,39.705312886426384,39.609165123987225,39.513075163913754,39.4170422216086,39.32106551424113,39.22514426071041,39.12927768160779,39.033464999179955,38.93770543729215,38.84199822139101,38.74634257846844,38.65073773702477,38.55518292703243,38.459677379899915,38.364220328435465,38.268811006811006,38.17344865052638,38.07813249637354,37.982861782400676,37.887635747876686,37.79245363325589,37.6973146801422,37.60221813125412,37.50716323038927,37.4121492223893,37.31717535310486,37.222240869360235,37.12734501891879,37.032487050447685,36.937666213483226,36.842881758396004,36.748132936356114,36.65341899929831,36.558739199887725,36.464092791484575,36.36947902811016,36.27489716441204,36.180346455629376,36.085826157558415,35.991335526518185,35.896873819315715,35.802440293211646,35.708034205885724,35.613654815402356,35.51930138017593,35.42497315893638,35.33066941069484,35.23638939470885,35.14213237044777,35.04789759755852,34.9536843358307,34.85949184516181,34.76531938552296,34.67116621692372,34.57703159937773,34.48291479286763,34.388815057310296,34.29473165252165,34.20066383818221,34.10661087380146,34.012572018683045,33.91854653188949,33.824533672206826,33.730532698109414,33.636542867724245,33.542563438795696,33.44859366864955,33.354632814157526,33.26068013170129,33.16673487713649,33.072796305756754,32.978863672257546,32.88493623069962,32.79101323447293,32.697093936259535,32.60317758799761,32.50926344084388,32.41535074513706,32.321438750360585,32.22752670510516,32.13361385703155,32.039699452832735,31.945782738196215,31.851862957765945,31.757939355104156,31.66401117265326,31.57007765169675,31.47613803232116,31.382191553376572,31.28823745243767,31.19427496576435,31.100303328262328,31.006321773442835,30.91232953338323,30.81832583868612,30.72430991843936,30.63028100017482,30.536238309827752,30.44218107169536,30.348108508395228,30.254019840823617,30.15991428811327,30.06579106759108,29.971649394735493,29.87748848313356,29.783307544437548,29.689105788321456,29.594882422437195,29.500636652370304,29.406367681595555,29.31207471143182,29.217756940997162,29.123413567163084,29.0290437845087,28.93464678527431,28.840221759315114,28.7457678940537,28.65128437443292,28.556770382868137,28.462225099198747,28.367647700639793,28.273037361732804,28.17839325429628,28.083714547375962,27.98900040719434,27.894249997099905,27.799462477515817,27.70463700588823,27.609772736634284,27.514868821088896,27.41992440745213,27.324938640735127,27.22991066270606,27.134839611835332,27.03972462324026,26.94456482862944,26.84935935624611,26.754107330811337,26.658807873466515,26.56346010171535,26.46806312936485,26.372616066466264,26.27711801925517,26.18156809009065,26.085965377394416,25.990308975588732,25.894597975033776,25.798831461964767,25.703008518427737,25.607128222215124,25.51118964680029,25.415191861271524,25.319133930265423,25.22301491389885,25.126833867701123,25.030589842544657,24.934281884574887,24.837909035139774,24.741470330718187,24.64496480284737,24.548391478049837,24.45174937775903,24.355037518244444,24.258254910535413,24.161400560344646,24.064473467990013,23.967472628315818,23.87039703061339,23.773245658539736,23.6760174900362,23.57871149724548,23.481326646428045,23.3838618978765,23.286316205830417,23.18868851838863,23.090977777421017,22.993182918479533,22.895302870706757,22.79733655674505,22.699282892642714,22.6011407877603,22.50290914467479,22.40458685908277,22.306172819702567,22.207665908174363,22.109064998959752,22.0103689592392,21.911576648808705,21.81268691997434,21.713698617446084,21.614610578229588,21.515421631516404,21.41613059857326,21.316736292628946,21.21723751876027,21.11763307377589,21.01792174609875,20.91810231564648,20.818173553710665,20.718134222833612,20.6179830766838,20.51771885992912,20.41734030810869,20.31684614750236,20.216235094998353,20.11550585795885,20.01465713408396,19.913687611272906,19.812595967483503,19.711380870589835,19.61004097823667,19.5085749376928,19.406981385701442,19.305258948328344,19.203406240807453,19.10142186738466,18.999304421158342,18.897052483917946,18.794664625979465,18.692139406018725,18.589475370901937,18.486671055513,18.38372498257877,18.280635662490795,18.1774015931245,18.074021259655183,17.97049313437111,17.866815676483554,17.762987331933402,17.6590065331946,17.554871699074624,17.45058123451099,17.346133530364853,17.241526963210674,17.136759895122452,17.03183067345651,16.92673763062993,16.821479083895554,16.716053335113315,16.61045867051689,16.504693360476722,16.39875565925871,16.292643804778777,16.186356018352626,16.079890504441607,15.973245450393563,15.866419026179301,15.759409384123842,15.652214658633511,15.544832965917237,15.4372624037033,15.329501050950569,15.221546967554445,15.11339819404759,15.005052751294613,14.89650864018131,14.787763841297988,14.678816314616881,14.569663999163424,14.460304812680818,14.350736651288969,14.240957389136327,14.130964878044722,14.0207569471483,13.91033140252415,13.799686026816744,13.688818578854466,13.577726793258648,13.466408380044697,13.35486102421578,13.24308238534769,13.131070097165946,13.018821767113934,12.906334975912443,12.793607277110368,12.680636196625926,12.56741923227861,12.453953853311361,12.34023749990314,12.226267582670914,12.112041482161203,11.997556548331488,11.882810100020095,11.767799424404984,11.652521776451067,11.536974378345633,11.421154418921617,11.305059053068476,11.188685401129987,11.072030548289263,10.95509154394017,10.837865401044724,10.720349095476195,10.602539565348309,10.48443371032829,10.36602839093564,10.247320427824263,10.128306601048735,10.008983649313677,9.889348269206039,9.769397114409799,9.649126794902145,9.528533876131576,9.407614878176219,9.28636627488271,9.164784492985007,9.042865911201545,8.920606859311931,8.798003617210611,8.675052413938488,8.551749426690549,8.428090779799902,8.304072543696577,8.179690733841085,8.054941309631431,7.929820173283304,7.804323168681947,7.678446080205617,7.552184631519481,7.4255344843383,7.29849123715843,7.17105042395724,7.043207512858203,6.914957904762787,6.786296931945685,6.65721985661412,6.527721869428319,6.397798087983972,6.2674435552535215,6.136653237986366,6.005422025065457,5.873744725820245,5.741616068292899,5.609030697457968,5.475983173392649,5.34246796939658,5.20847947005916,5.074011969273329,4.939059668192897,4.8036166731326375,4.6676769934080085,4.531234539113825,4.394283118838132,4.25681643731042,4.118828092981232,3.980311575530777,3.8412602633036386,3.7016674206682865,3.561526195296892,3.4208296153637434,3.279570586659247,3.1377418896155405,2.9953361762417785,2.852345966964208,2.708763647369267,2.5645814648441387,2.4197915251123163,2.2743857886597425,2.1283560670470365,1.9816940191035997,1.834391146999451,1.6864387921891648,1.537828131223364,1.3885501714229918,1.2385957464097714,1.0879555114879054,0.9366199388707628,0.7845793127463594,0.6318237241747511,0.47834306581040664,0.32412702644296587,0.16916508534768582,0.013446506438128836,-0.14303966778680888,-0.30030462251164636,-0.4583597770966321,-0.6172167918047649,-0.7768875747723882,-0.9373842892356947,-1.0987193610225177,-1.2609054863235656,-1.4239556397535011,-1.5878830827169281,-1.7527013720917353,-1.9184243692455425,-2.085066249399972,-2.252641511359627,-2.4211649876229444,-2.5906518548923145,-2.7611176450042194,-2.9325782562979725,-3.1050499654459145,-3.2785494397668913,-3.4530937500475716,-3.6287003838965006,-3.8053872596585165,-3.9831727409173254,-4.1620756516170445,-4.342115291834546,-4.523311454236591,-4.70568444125837,-4.889255083040723,-5.07404475616886,-5.260075403253552,-5.447369553403007,-5.635950343633567,-5.825841541271814,-6.017067567404126,-6.2096535214329265,-6.403625206803781,-6.599009157970158,-6.795832668669561,-6.994123821587721,-7.193911519494634,-7.395225517939707,-7.598096459603767,-7.8025559104066815,-8.008636397483428,-8.216371449143253,-8.425795636940109,-8.636944619989322,-8.849855191676397,-9.06456532891633,-9.281114244131459,-9.499542440132586,-9.719891768098933,-9.942205488872276,-10.166528337794489,-10.392906593339262,-10.621388149807899,-10.852022594384096,-11.084861288864317,-11.319957456412453,-11.557366273713,-11.797144968934674,-12.039352925950766,-12.28405179530381,-12.53130561244825,-12.781180923852958,-13.033746921602187,-13.289075587195441,-13.547241845312385,-13.808323728388757,-14.072402552931294,-14.339563108594916,-14.609893861153523,-14.88348717061092,-15.160439525834931,-15.44085179724658,-15.724829509263145,-16.012483134387878,-16.303928411051373,-16.599286687554155,-16.89868529473773,-17.202257950324594,-17.510145198226724,-17.822494886531416,-18.13946268834198,-18.461212670188843,-18.787917913344188,-19.119761194088056,-19.456935729796612,-19.799645998681086,-20.14810864211637,-20.502553459793887,-20.86322450945096,-21.23038132470552,-21.60430026661996,-21.9852760270916,-22.373623305098988,-22.769678680323636,-23.17380271283625,-23.586382302538198,-24.007833348076332,-24.43860375224247,-24.8791768297406,-25.3300751840454,-25.791865133395532,-26.265161782421615,-26.75063485635772,-27.249015440356345,-27.76110379860819,-28.287778488758732,-28.83000703918694,-29.388858523729112,-29.965518455390765,-30.561306534454616,-31.17769793691633,-31.816349030238968,-32.47912867496393,-33.16815664191711,-33.885851188805105,-34.63498856206053,-35.41877821984181,-36.24095906663791,-37.10592419935759,-38.01888499938232,-38.98609055525466,-40.0151265633437,-41.11533117440493,-42.298387726782664,-43.57919369869873,-44.97717740221634,-46.51837336784922,-48.23885414810306,-50.190753393381215,-52.45367465572755,-55.15861306111958,-58.545843106345075,-63.13973739268701,-70.54449256343861};
const static float temps2[] PROGMEM = {-272.15,432.2339076731296,354.6488134315348,316.6722169716397,292.3801844930887,274.85859857457126,261.31684232478915,250.36926108467878,241.2340452988584,233.42975248235848,226.64033249199593,220.6479169738908,215.29640463518393,210.47039197788683,206.0823229736871,202.06430479592962,198.36270305000227,194.93446098709256,191.74452551764375,188.7640052591861,185.96882548995762,183.33872820612305,180.856516770033,178.50747708504957,176.2789282686374,174.159869735703,172.14070102684178,170.21299720065758,168.36932714548192,166.60310538694512,164.90847028687682,163.28018321991004,161.71354456163056,160.20432325252153,158.74869740296134,157.34320393771378,155.9846956874955,154.67030465177254,153.39741040379602,152.1636128027962,150.96670833163097,149.80466950028762,148.6756268534541,147.5778531991856,146.50974973954874,145.46983383613588,144.45672818591413,143.46915121789243,142.50590855001906,141.56588536973408,140.64803962160187,139.7513959021885,138.87503997640164,138.0181138413556,137.17981127384218,136.35937380599069,135.55608708093536,134.76927754649296,133.99830945014202,133.24258210314792,132.50152738559075,131.77460746743634,131.06131272372232,130.36115982446944,129.6736899821443,128.99846734142682,128.33507749772184,127.68312613233377,127.04223775351664,126.41205453375625,125.79223523464191,125.18245421157843,124.58240049136793,123.99177691639375,123.41029934975086,122.83769593622065,122.27370641447516,121.71808147633391,121.17058216928649,120.6309793388424,120.09905310758467,119.57459238808303,119.05739442707545,118.54726437855504,118.04401490360391,117.5474657949988,117.05744362478373,116.5737814131528,116.09631831712579,115.624899337621,115.15937504364507,114.69960131241993,114.24543908436146,113.79675413190876,113.3534168412807,112.9153020063078,112.4822886335499,112.05425975797243,111.631102268505,111.21270674285762,110.79896729101506,110.38978140687067,109.98504982750018,109.58467639961123,109.18856795273626,108.79663417876714,108.40878751745686,108.02494304753867,107.64501838313822,107.26893357517406,106.89661101746213,106.52797535726125,106.16295341000807,105.80147407801343,105.44346827289928,105.08886884157505,104.73761049556146,104.38962974348294,104.04486482656137,103.70325565695225,103.36474375877651,103.0292722117074,102.69678559698275,102.36722994571801,102.04055268940488,101.7167026124867,101.3956298069059,101.07728562852833,100.76162265535157,100.44859464741148,100.13815650830458,99.83026424825005,99.52487494861845,99.22194672785679,98.92143870874702,98.62331098693471,98.3275246006699,98.0340415017049,97.74282452729761,97.45383737326819,97.16704456806542,96.88241144779494,96.59990413216912,96.31948950133773,96.04113517356052,95.76480948368635,95.49048146240443,95.21812081623375,94.94769790822079,94.67918373931542,94.41254993039655,94.14776870492051,93.88481287216757,93.62365581106104,93.36427145453632,93.10663427443768,92.8507192669216,92.59650193834699,92.34395829163174,92.09306481305907,91.84379845951509,91.59613664614034,91.35005723438127,91.10553852042415,90.86255922399806,90.62109847753328,90.38113581566085,90.14265116504083,89.90562483450731,89.67003750551885,89.43587022290166,89.20310438587666,88.97172173935894,88.74170436552009,88.51303467560433,88.28569540198862,88.05966959047913,87.83494059283493,87.6114920595113,87.38930793261443,87.1683724390619,86.94867008393902,86.73018564404731,86.51290416163658,86.29681093831482,86.08189152913053,85.86813173682123,85.65551760622219,85.44403541883122,85.2336716875231,85.02441315140965,84.81624677084051,84.60915972253906,84.4031393948714,84.19817338324151,83.99424948561,83.79135569813258,83.58948021091413,83.38861140387417,83.18873784272154,82.98984827503375,82.79193162643816,82.59497699689217,82.39897365705855,82.2039110447742,82.00977876160835,81.81656656950781,81.62426438752743,81.43286228864213,81.24235049663866,81.0527193830846,80.86395946437233,80.67606139883577,80.48901598393775,80.30281415352579,80.11744697515508,79.93290564747502,79.74918149767979,79.56626597901919,79.38415066836876,79.20282726385807,79.02228758255433,78.84252355820087,78.66352723900815,78.48529078549683,78.30780646838997,78.13106666655426,77.95506386498903,77.7797906528603,77.60523972158046,77.43140386293072,77.25827596722661,77.08584902152415,76.91411610786673,76.74307040157026,76.57270516954708,76.40301376866654,76.23398964415156,76.06562632801058,75.8979174375034,75.73085667364069,75.56443781971512,75.39865473986549,75.23350137767017,75.06897175477167,74.90505996952976,74.74176019570336,74.5790666811605,74.41697374661476,74.25547578438875,74.09456725720264,73.9342426969888,73.77449670373,73.61532394432174,73.45671915145857,73.2986771225419,73.14119271861142,72.98426086329692,72.82787654179191,72.67203479984806,72.51673074278892,72.36195953454416,72.20771639670255,72.05399660758371,71.90079550132816,71.74810846700547,71.59593094773936,71.44425843985027,71.29308649201437,71.14241070443887,70.99222672805308,70.84253026371539,70.6933170614347,70.54458291960731,70.39632368426822,70.248535248356,70.10121355099221,69.95435457677394,69.80795435507963,69.6620089593876,69.51651450660819,69.37146715642643,69.22686311065877,69.08269861262033,68.93896994650407,68.79567343677144,68.65280544755376,68.5103623820649,68.36834068202376,68.22673682708819,68.08554733429793,67.9447687575281,67.80439768695254,67.66443074851605,67.52486460341635,67.38569594759514,67.24692151123787,67.10853805828253,66.97054238593643,66.83293132420215,66.69570173541086,66.55885051376424,66.42237458488398,66.28627090536918,66.15053646236078,66.01516827311428,65.88016338457862,65.74551887298293,65.61123184343018,65.4772994294969,65.34371879284043,65.21048712281242,65.07760163607838,64.94505957624398,64.81285821348723,64.68099484419673,64.54946679061607,64.41827140049344,64.2874060467376,64.1568681270789,64.02665506373626,63.89676430308873,63.76719331535321,63.63793959426653,63.50900065677337,63.38037404271813,63.25205731454275,63.12404805698827,62.99634387680197,62.868942402448454,62.74184128382552,62.61503819198424,62.48853081885363,62.3623168769696,62.23639409920759,62.11076023851973,61.98541306767618,61.860350379009674,61.73556998416478,61.61106971385033,61.48684741759598,61.36290096351229,61.23922823805418,61.1158271457881,60.99269560916309,60.86983156828427,60.7472329806904,60.62489782113488,60.502824081368885,60.381009769929165,60.25945291192767,60.138151548844974,60.01710373832623,59.896307553980535,59.775761085182694,59.655462436878224,59.53540972939106,59.41560109823348,59.29603469391981,59.17670868178152,59.05762124178591,58.938770568356745,58.82015487019777,58.70177237011836,58.58362130486188,58.465699924936246,58.348006494446906,58.2305392909322,58.11329660520056,57.99627674117056,57.87947801571278,57.76289875849375,57.64653731182216,57.530392030497126,57.41446128165859,57.2987434446394,57.18323691081963,57.06794008348288,56.95285137767428,56.83796922006053,56.72329204879151,56.608818313364225,56.494546474488004,56.38047500395152,56.26660238449222,56.15292710966611,56.03944768372071,55.92616262146851,55.813070448162364,55.700169699373134,55.587458920867675,55.47493666848942,55.3626015080398,55.25045201516167,55.138486775223555,55.02670438320598,54.91510344358909,54.80368257024088,54.69244038630819,54.58137552410767,54.470486625018964,54.35977233937888,54.2492313263769,54.13886225395174,54.02866379868942,53.918634645722534,53.80877348863066,53.69907902934182,53.58954997803528,53.48018505304543,53.37098298076705,53.261942495560845,53.1530623396614,53.04434126308479,52.935778023538546,52.82737138633155,52.71912012428578,52.611023017648506,52.503078854005935,52.39528642819732,52.28764454223057,52.18015200519852,52.07280763319585,51.965610249237784,51.858558683178615,51.75165177163194,51.644888357891375,51.53826729185221,51.431787429933934,51.325447635003854,51.21924677630062,51.11318372935989,51.00725737593979,50.90146660394737,50.79581030736631,50.690287386184536,50.584896746323295,50.479637299566946,50.374507963492704,50.2695076614022,50.164635322252764,50.059889880590106,49.9552702764812,49.850775455448115,49.74640436840241,49.642155971580166,49.53802922647765,49.43402309978768,49.33013656333645,49.22636859402115,49.122718173748126,49.01918428937154,48.91576593263261,48.81246210009954,48.70927179310809,48.60619401770231,48.50322778457627,48.400372109015905,48.297626010841896,48.19498851435242,48.092458648267154,47.99003544567091,47.88771794395882,47.785505184780845,47.68339621398775,47.58139008157701,47.47948584163913,47.377682552304975,47.27597927569286,47.17437507785638,47.072869028732896,46.97146020209203,46.87014767548493,46.768930530193586,46.66780785118084,46.56677872704091,46.46584224994962,46.36499751561615,46.26424362323377,46.16357967543223,46.0630047782297,45.96251804098546,45.8621185763526,45.76180550023156,45.66157793172346,45.56143499308405,45.4613758096782,45.36139950993413,45.261505225298606,45.161692090191764,45.06195924196305,44.96230582084655,44.862730969917436,44.763233835048084,44.66381356486488,44.56446931070502,44.46520022657387,44.366005469102106,44.26688419750383,44.16783557353409,44.06885876144753,43.969952927956626,43.87111724219028,43.772350875652876,43.67365300218353,43.57502279791515,43.47645944123457,43.37796211274161,43.27952999520983,43.18116227354625,43.08285813475186,42.98461676788253,42.88643736400928,42.788319116179935,42.69026121937958,42.592262870492334,42.494323268262804,42.39644161325759,42.29861710782734,42.20084895606857,42.10313636378578,42.0054785384541,41.90787468918114,41.81032402667006,41.712825763182025,41.615379112499056,41.51798328988713,41.420637512059216,41.323340997138246,41.22609296462082,41.12889263534038,41.03173923143066,40.93463197628961,40.8375700945428,40.740552812007536,40.64357935565647,40.54664895358184,40.44976083495931,40.3529142300124,40.25610836997629,40.15934248706259,40.06261581442317,39.96592758611507,39.86927703706448,39.772663403031686,39.67608592057519,39.579543827016664,39.483036360405436,39.38656275948301,39.290122263648186,39.19371411292127,39.097337547909206,39.000991809770085,38.90467614017825,38.8083897812885,38.71213197570154,38.61590196642851,38.51969899685554,38.423522310708904,38.327371152019566,38.23124476508809,38.13514239444913,38.03906328483646,37.94300668114755,37.84697182840807,37.750957971736625,37.65496435630945,37.55899022732473,37.463034829967285,37.367097409372946,37.271177210592725,37.17527347855747,37.079385458041884,36.98351239362887,36.887653529673514,36.79180811026697,36.69597537920089,36.6001545799308,36.50434495553998,36.40854574870343,36.31275620165093,36.21697555613099,36.12120305337379,36.02543793405482,35.92967943825772,35.83392680543727,35.73817927438239,35.64243608317889,35.54669646917188,35.45095966892842,35.355224918199724,35.25949145188321,35.163758503984695,35.068025307580115,34.97229109477735,34.87655509667724,34.78081654333562,34.68507466372364,34.58932868568945,34.493577835918416,34.39782133989394,34.30205842185774,34.20628830476983,34.11051021026873,34.01472335863093,33.91892696873043,33.823120257997914,33.72730244237994,33.631472736297496,33.53563035260447,33.439774502546186,33.343904395717175,33.24801924001872,33.15211824161679,33.05620060489866,32.960265532430356,32.864312224912624,32.76833988113776,32.67234769794521,32.576334870177504,32.48030059063541,32.38424405003303,32.28816443695257,32.192060937798544,32.09593273675188,31.999779015723448,31.903598954307597,31.807391729734718,31.711156516824133,31.61489248793589,31.51859881292296,31.42227465908212,31.3259191911053,31.229531571029952,31.133110958189206,31.03665650916139,30.940167377719547,30.843642714780117,30.747081668351143,30.650483383480264,30.553847002202076,30.457171663485155,30.360456503178227,30.263700653956278,30.166903245265814,30.0700634032699,29.973180250792268,29.87625290726129,29.779280488653228,29.682262107434724,29.58519687250515,29.488083889137897,29.39092225892159,29.29371107969996,29.196449445512087,29.099136446530963,29.001771169002268,28.904352695181956,28.806880103273556,28.70935246736434,28.611768857361255,28.514128338925957,28.416429973409095,28.31867281778375,28.2208559245787,28.122978341810096,28.025039112912964,27.927037276671854,27.828971867150415,27.730841913620395,27.632646440489737,27.534384467229927,27.43605500830222,27.337657073083335,27.23918966579015,27.140651785403236,27.042042425589727,26.943360574625274,26.844605215315084,26.74577532491344,26.64686987504308,26.54788783161291,26.448828154734997,26.349689798640327,26.250471711593775,26.151172835807586,26.051792107354117,25.95232845607734,25.85278080550296,25.753148072747763,25.65342916842735,25.553622996563263,25.45372845448793,25.35374443274935,25.25366981501395,25.153503477967945,25.053244291218164,24.952891117190347,24.852442811027345,24.75189822048486,24.651256185826412,24.550515539716343,24.449675107111716,24.34873370515271,24.24769014305093,24.146543221976913,24.045291734945295,23.943934466699034,23.84247019359117,23.740897683465732,23.639215695536052,23.537422980262193,23.43551827922579,23.333500325003456,23.231367841038377,23.129119541509567,23.026754131199823,22.92427030536095,22.821666749577616,22.718942139628666,22.616095141346705,22.513124410475257,22.410028592523588,22.30680632261982,22.203456225361492,22.099976914663443,21.996366993603885,21.892625054267796,21.788749677587703,21.684739433182187,21.580592879191784,21.476308562112024,21.371885016624162,21.26732076542271,21.162614319040642,21.05776417567165,20.95276882098898,20.847626727962165,20.74233635666991,20.63689615411056,20.531304554008784,20.42555997661958,20.31966082852864,20.21360550244958,20.107392377017447,20.001019816578946,19.894486170979235,19.78778977534455,19.680928949861652,19.573901999553073,19.466707214048483,19.35934286735261,19.251807217608132,19.144098506855357,19.03621496078688,18.928154788498603,18.819916182235602,18.711497317134217,18.60289635095853,18.494111423833203,18.38514065797068,18.275982157393628,18.166634007652306,18.057094275536997,17.947361008784753,17.837432235780966,17.727305965255084,17.616980185971215,17.506452866412303,17.395721954458793,17.284785377060985,17.17364103990508,17.062286827073308,16.950720600697025,16.83894020060336,16.726943443955122,16.614728124883527,16.50229201411372,16.389632858583354,16.276748381053267,16.163636279710488,16.05029422776363,15.936719873029915,15.822910837514144,15.708864716979292,15.59457908050797,15.480051470055287,15.365279399992914,15.250260356643139,15.134991797804048,15.019471152263975,14.903695819307131,14.7876631682077,14.671370537714154,14.554815235522312,14.437994537737495,14.32090568832507,14.203545898549464,14.08591234640096,13.968002176010316,13.849812497050664,13.731340384126554,13.612582876149133,13.493536975698532,13.374199648371246,13.25456782211387,13.13463838654144,13.014408192240865,12.893874050058457,12.773032730371881,12.651880962344933,12.530415433165786,12.40863278726789,12.286529625532467,12.164102504472908,12.041347935400609,11.918262383570209,11.794842267306137,11.671083957107498,11.546983774732496,11.422537992260459,11.297742831132041,11.172594461165488,11.047088999550397,10.92122250981572,10.79499100077328,10.668390425435348,10.541416679905353,10.41406560224118,10.286332971289823,10.158214505493618,10.029705861665434,9.90080263373369,9.77150035145479,9.641794479093164,9.511680414066802,9.381153485558457,9.250208953089839,9.118842005059491,8.987047757241385,8.85482125124463,8.72215745293147,8.589051250793432,8.455497454284227,8.321490792106488,8.187025910453201,8.052097371200261,7.9166996500496225,7.7808271346212905,7.644474122491715,7.5076348191783495,7.370303336066286,7.232473688277366,7.094139792477847,6.955295464623987,6.815934417642097,6.676050259041858,6.5356364884601135,6.394686495132305,6.253193555289556,6.111150829478788,5.968551359802291,5.825388067074982,5.681653747895211,5.537341071626827,5.3924425772888185,5.246950670349065,5.100857619418889,4.954155552844384,4.806836455190535,4.658892163614894,4.510314364125065,4.361094587717048,4.211224206388863,4.060694429025034,3.909496297146063,3.757620680519267,3.6050582726231823,3.4517995859616235,3.2978349472199397,3.1431544922579633,2.98774816093254,2.831605691742311,2.674716616288265,2.517070253541192,2.3586557039088234,2.1994618430936157,2.0394773157327677,1.8786905288099547,1.717089644830594,1.5546625747483063,1.3913969706334797,1.2272802180711437,1.0622994282765603,0.8964414299160239,0.7296927606187182,0.5620396581665545,0.3934680513460762,0.22396355044742222,0.053511437393353845,-0.11790334451853823,-0.29029620127988665,-0.46368289926039097,-0.6380795767423137,-0.8135027559227979,-0.9899693554066289,-1.1674967032138284,-1.3461025503279984,-1.5258050848128732,-1.7066229465253286,-1.888575242456625,-2.071681562733545,-2.2559619973141594,-2.4414371534151655,-2.628128173709513,-2.8160567553359215,-3.0052451697636116,-3.195716283560671,-3.3874935801136985,-3.5806011823542576,-3.7750638765466533,-3.9709071371992763,-4.168157153162042,-4.366840854980808,-4.566985943580676,-4.768620920357705,-4.971775118762878,-5.176478737468244,-5.3827628752125065,-5.590659567427963,-5.800201824761814,-6.011423673609556,-6.224360198788361,-6.439047588489927,-6.6555231816583955,-6.873825517955254,-7.093994390481498,-7.316070901443368,-7.540097520961922,-7.766118149242573,-7.994178182338601,-8.224324581762062,-8.456605948216975,-8.691072599751408,-8.927776654652632,-9.166772119436018,-9.408114982309542,-9.651863312529258,-9.898077366100381,-10.14681969831696,-10.398155283681433,-10.652151643794639,-10.908878983863474,-11.168410338535523,-11.430821727838804,-11.69619232408354,-11.964604630666315,-12.236144673816,-12.51090220842525,-12.788970939234673,-13.070448758769658,-13.355438003583117,-13.64404573052758,-13.936384014973783,-14.232570273111207,-14.53272761071139,-14.836985201017967,-15.145478694743815,-15.458350665520584,-15.775751094559439,-16.09783789875928,-16.424777507040005,-16.756745490309555,-17.093927251192866,-17.436518780488683,-17.78472748828841,-18.138773118817966,-18.498888759376428,-18.865321955283065,-19.23833594454493,-19.61821102808088,-20.005246093844107,-20.399760316156232,-20.80209505510453,-21.21261598507698,-21.631715486580617,-22.059815341594657,-22.497369780101565,-22.944868934428968,-23.402842769018946,-23.871865566740126,-24.352561069530367,-24.84560839187978,-25.351748851571415,-25.87179389470512,-26.406634333355726,-26.95725116698017,-27.524728326581453,-28.110267768741977,-28.715207461993288,-29.341042960482696,-29.989453463576126,-30.66233353512527,-31.361832032146594,-32.09040031338654,-32.850852529652116,-33.646441841132116,-34.48095792072451,-35.358853340198806,-36.28540981334015,-37.266960486212156,-38.311192731311394,-39.4275693920917,-40.62792918152883,-41.92736682673009,-43.345566648310324,-44.90890443309033,-46.65392280717248,-48.63343032967657,-50.92805332451897,-53.67045511396819,-57.10393711727971,-61.759385795238245,-69.26051426606932};
//1024 values
//automatically generated from alexjones.xyz/projects/Tools/Thermistors/
//Resistors are setup as a voltage divider with the constant resistor on Vref and the thermistor on ground.
//Constant resistor should be about in the middle of the range of resistances for the desired temperature range
char c;
bool state = false;

#define BUFSIZE 64
char buf [BUFSIZE] = "";
char buf2 [BUFSIZE] = "";
long parms[10];
char dexs [10];
int i = 0,j,k;
bool done = true;
//AccelStepper Taxis(1, 5, 4); // step,dir
//AccelStepper Zaxis(1, 3, 2); // step,dir
//AccelStepper motors[] = {Taxis,Zaxis};
void setup() {
  Serial.begin(57600);
  pinMode(tempSensorA, INPUT);
  pinMode(tempSensorB, INPUT);
  pinMode(relay_pin, OUTPUT);
  digitalWrite(relay_pin, LOW);
  pinMode(stepPin1,OUTPUT); 
  pinMode(dirPin1,OUTPUT);
  pinMode(stepPin2,OUTPUT); 
  pinMode(dirPin2,OUTPUT);
  Serial.println("RD");
}
void loop() {
  /*motors[0].run();
  motors[1].run();
  if (!done && motors[0].distanceToGo() == 0 && motors[1].distanceToGo() == 0) {
    Serial.println("done");
    done = true;
  }*/
  while(Serial.available()){
    c = Serial.read();
    if (c != '\n') {
      buf[i] = c;
      i++;
    }
    else{
      buf[i] = ' ';
      command(buf,i);
      i = 0;
    }
  }
}
void command(char * buf, int len){
  if(*buf == 'm') motor_control(buf+1,len-1);
  else if(*buf == 'r') readTemps();
  else if(*buf == 'l') {      
    state = !state;
    digitalWrite(relay_pin, state);
  }
  else Serial.println("what");
}
void motor_control(char * buf, int len) {
  dexs[0] = 0;
  for (j=0,i=1; j <= len; j++) {
    if (buf[j] == ' ') {
      dexs[i] = j+1;
      i++;
    }
  }
  c = i;
  for(i = 0; i < c-1; i++){
    for(j = dexs[i], k = 0; j < dexs[i+1]; j++, k++)
      buf2[k] = buf[j];
    buf2[k] = 0;
    parms[i] = atol(buf2);
  }
  if(parms[0] < 0 || parms[0] > 1) return;
  
  if(parms[0] == 0) {stepM2(parms[1]);}
  else if(parms[0] == 1) {stepM1(parms[1]);}
  Serial.println("done");
  //motors[parms[0]].setMaxSpeed(parms[2]);
  done = false;
}
void stepM1(long num){
  if(num < 0){
  digitalWrite(dirPin1,HIGH); // Enables the motor to move in a particular direction
  num = -num;
  }
  else
  digitalWrite(dirPin1,LOW); // Enables the motor to move in a particular direction
  // Makes 200 pulses for making one full cycle rotation
  for(long x = 0; x < num; x++) {
    digitalWrite(stepPin1,HIGH); 
    delayMicroseconds(500); 
    digitalWrite(stepPin1,LOW); 
    delayMicroseconds(500); 
  }
}
void stepM2(long num){
  if(num < 0){
  digitalWrite(dirPin2,HIGH); // Enables the motor to move in a particular direction
  num = -num;
  }
  else
  digitalWrite(dirPin2,LOW); // Enables the motor to move in a particular direction
  // Makes 200 pulses for making one full cycle rotation
  for(long x = 0; x < num; x++) {
    digitalWrite(stepPin2,HIGH); 
    delayMicroseconds(500); 
    digitalWrite(stepPin2,LOW); 
    delayMicroseconds(500); 
  }
}
void readTemps() {
  int a,b;
  a = analogRead(tempSensorA);
  b = analogRead(tempSensorB);
  Serial.print("t:1:");
  Serial.print(pgm_read_float_near(&temps1[a]));
  Serial.print(":2:");
  Serial.println(pgm_read_float_near(&temps2[b]));
}
